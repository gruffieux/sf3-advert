{# Cette vue n'hérite de personne. Elle est en électron libre. #}
{% block scripts_header %}
	<script src="//cdn.ckeditor.com/4.6.0/standard/ckeditor.js"></script>
{% endblock %}

<h3>{{ 'advert.form'|trans }}</h3>

<div class="well">
	{# Formulaire par défault #}
	{# form(form) #}
	
	{# Balise ouvrante du formulaire #}
	{{ form_start(form, {'attr': {'class': 'form-horizontal'}}) }}
	
	{# Les erreurs générales du formulaire #}
	{{ form_errors(form) }}
	
	{# Génération du label + error + widget sur une ligne #}
	{% if form.date is defined %}
		{{ form_row(form.date, {'label': 'advert.form.date'|trans}) }}
	{% endif %}
	
	{# Génération manuelle et éclatée #}
	<div class="form-group">
		{{ form_label(form.title, 'advert.form.title'|trans, {'label_attr': {'class': 'col-sm-2 control-label'}}) }}
		
		{# Affichage des erreurs pour ce champ #}
		{{ form_errors(form.title) }}
		
		<div class="col-sm-10">
			{# Génération du champ #}
			{{ form_widget(form.title, {'attr': {'class': 'form-control'}}) }}
		</div>
	</div>
	
	{# Génération manuelle et éclatée #}
	<div class="form-group">
		{{ form_label(form.content, 'advert.form.desc'|trans, {'label_attr': {'class': 'col-sm-2 control-label'}}) }}
		
		{# Affichage des erreurs pour ce champ #}
		{{ form_errors(form.content) }}
		
		<div class="col-sm-10">
			{# Génération du champ #}
			{{ form_widget(form.content, {'attr': {'class': 'form-control'}}) }}
		</div>
		
		<script>
			// TODO: Trouver un moyen de charger cela dynamiquement
            //CKEDITOR.replace( 'gbrfix_platformbundle_advert[content]' );
        </script>
	</div>
	
	{# Génération manuelle et éclatée #}
	<div class="form-group">
		{{ form_label(form.author, 'advert.form.author'|trans, {'label_attr': {'class': 'col-sm-2 control-label'}}) }}
		
		{# Affichage des erreurs pour ce champ #}
		{{ form_errors(form.author) }}
		
		<div class="col-sm-10">
			{# Génération du champ #}
			{{ form_widget(form.author, {'attr': {'class': 'form-control'}}) }}
		</div>
	</div>
	
	{# Génération manuelle et éclatée #}
	<div class="form-group">
		{{ form_label(form.email, 'advert.form.email'|trans, {'label_attr': {'class': 'col-sm-2 control-label'}}) }}
		
		{# Affichage des erreurs pour ce champ #}
		{{ form_errors(form.email) }}
		
		<div class="col-sm-10">
			{# Génération du champ #}
			{{ form_widget(form.email, {'attr': {'class': 'form-control'}}) }}
		</div>
	</div>
	
	{# Génération du label + error + widget sur une ligne #}
	{{ form_row(form.image.file, {'label': 'advert.form.image'|trans}) }}
	
	{# Génération du label + error + widget sur une ligne #}
	{{ form_row(form.categories, {'label': 'category.title'|transchoice(2)}) }}
	{# TODO: Créer un moyen différent d'ajouter les catégories #}
	<a href="#" id="add_category" class="btn btn-default">{{ 'category.add'|trans }}</a>
	
	{# Génération du label + error + widget sur une ligne #}
	{% if form.published is defined %}
		{{ form_row(form.published, {'label': 'advert.form.publish'|trans}) }}
	{% endif %}
	
	{# Pour le bouton submit, pas de label ni d'erreur #}
	{{ form_widget(form.save, {'attr': {'class': 'btn btn-primary'}}) }}
	
	{# Génération auto des champs pas encore écrits. Dans cet exemple, ce serait le champ CSRF (géré automatiquement par Symfony) #}
	{{ form_rest(form) }}
	
	{# Balise fermante du formulaire #}
	{{ form_end(form) }}
</div>

{% javascripts filter='?jsqueeze'
	'bundles/gbrfixplatform/js/category.js' %}
	<script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %}
